---
layout: post
title: '部署k3s集群'
# subtitle: '通过shell脚本，进行redis批量迁移'
date: 2023-02-06
categories: 云计算
author: Jason
# cover: 'assets/img/profile.png'
tags: k3s cluster
---

## 环境信息
机器数量：2
机器配置：1核1G
master IP: 192.168.216.3
node IP  : 192.168.216.4

## 安装过程
### 部署master
```shell
curl -sfL https://get.k3s.io | sh -
```

### 部署node
>其中，K3S_URL为master的6443端口，如果未配置的话，则默认安装为master
K3S_TOKEN的获取方式：
```shell
cat /var/lib/rancher/k3s/server/node-token
```
> node节点具体的部署命令
```shell
curl -sfL https://get.k3s.io | K3S_URL=https://192.168.216.3:6443 K3S_TOKEN=K10c7eb88dfa63c29b1757e0ad6db8fb5361f2092f54ba7ab022c23e1bad21cb2c9::server:5c0bf11e84ebca1ea929cb450cd7154b sh -
```